@import "tailwindcss";
@plugin "@tailwindcss/typography";
@custom-variant dark (&:where(.dark, .dark *));

/* =========================================
   视觉变量定义 - 苹果风格色调
   ========================================= */
:root {
    --background: #fbfbfd; /* 苹果官网标志性的浅灰白 */
    --foreground: #1d1d1f; /* 接近纯黑但更有深度的炭黑 */
    --card-bg: rgba(255, 255, 255, 0.7);
    --border: rgba(0, 0, 0, 0.08);
    --selection: rgba(0, 125, 250, 0.2);
    --radius: 1rem;
}

html.dark {
    --background: #000000;
    /* 修改：将文字颜色提升到纯白，增加对比度 */
    --foreground: #ffffff;
    --card-bg: rgba(28, 28, 30, 0.7); /* Apple 黑暗模式下的深灰色 */
    --border: rgba(255, 255, 255, 0.15);
    --selection: rgba(0, 125, 250, 0.5);
}

/* =========================================
   基础样式优化
   ========================================= */
html,
body {
    height: 100%;
}

body {
    margin: 0;
    background-color: var(--background);
    color: var(--foreground);
    /* 苹果系统级字体栈，确保极佳的排版视觉 */
    font-family: "SF Pro Display", "SF Pro Icons", "Inter", "Helvetica Neue", "Helvetica", "Arial", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    scroll-behavior: smooth;
    transition: background-color 0.3s ease;
}

/* 移除全局默认选择颜色，改用更柔和的色调 */
::selection {
    background: var(--selection);
}

/* =========================================
   高级交互与视觉类
   ========================================= */

/* 磨砂玻璃质感 (Glassmorphism) */
.glass {
    background: var(--card-bg);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid var(--border);
}

/* 优化 prose 样式：确保黑暗模式下强制使用 prose-invert 色系 */
.prose-base {
    line-height: 1.75;
    color: #374151;
}

/* 黑暗模式下的基础文字颜色定义 */
html.dark .prose-base {
    color: #ffffff; /* 基础文字改为纯白 */
}

/* 强制覆盖黑暗模式下内容区域的所有子元素颜色 */
html.dark .prose-base,
html.dark .prose-base p,
html.dark .prose-base span,
html.dark .prose-base li,
html.dark .prose-base strong {
        color: #ffffff !important;
}

/* 黑暗模式下的标题颜色，使用苹果风格的浅白色 */
html.dark .prose-base h1,
html.dark .prose-base h2,
html.dark .prose-base h3,
html.dark .prose-base h4 {
            color: #f5f5f7 !important;
}

h1, h2, h3, h4 {
    letter-spacing: -0.02em; /* 苹果风格的紧凑字间距 */
    font-weight: 600;
}

/* =========================================
   Obsidian Callout (警告块) 苹果味视觉升级
   ========================================= */

/* 基础 Callout 容器：去掉了厚重的边框，改用浅色背景+侧边条 */
.callout {
    border: 1px solid var(--border);
    border-left-width: 4px;
    border-radius: 0.75rem;
    padding: 1.25rem;
    margin: 1.5rem 0;
    background-color: var(--card-bg);
    backdrop-filter: blur(10px);
    transition: transform 0.2s ease;
}

    /* 悬停微动效 */
    .callout:hover {
        transform: translateX(2px);
    }

.callout-title {
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
}

.callout-content {
    font-size: 0.925rem;
    line-height: 1.6;
    opacity: 0.9;
}

/* 各种类型的颜色微调 - 降低饱和度，增加高级感 */

/* 1. Note / Info - 蓝色系 */
.callout[data-callout="note"],
.callout[data-callout="info"],
.callout[data-callout="abstract"] {
    border-left-color: #0071e3;
    background-color: rgba(0, 113, 227, 0.05);
}

    .callout[data-callout="note"] .callout-title,
    .callout[data-callout="info"] .callout-title {
        color: #0071e3;
    }

/* 2. Success / Tip - 绿色系 */
.callout[data-callout="tip"],
.callout[data-callout="success"],
.callout[data-callout="done"] {
    border-left-color: #34c759;
    background-color: rgba(52, 199, 89, 0.05);
}

    .callout[data-callout="tip"] .callout-title,
    .callout[data-callout="success"] .callout-title {
        color: #28a84d;
    }

/* 3. Warning / Caution - 橙色系 */
.callout[data-callout="warning"],
.callout[data-callout="caution"] {
    border-left-color: #ff9500;
    background-color: rgba(255, 149, 0, 0.05);
}

    .callout[data-callout="warning"] .callout-title {
        color: #d67d00;
    }

/* 4. Danger / Error / Bug - 红色系 */
.callout[data-callout="danger"],
.callout[data-callout="error"],
.callout[data-callout="bug"] {
    border-left-color: #ff3b30;
    background-color: rgba(255, 59, 48, 0.05);
}

    .callout[data-callout="danger"] .callout-title {
        color: #eb2f23;
    }

/* 5. Quote / Example - 灰色或紫色 */
.callout[data-callout="quote"] {
    border-left-color: #8e8e93;
    background-color: rgba(142, 142, 147, 0.05);
}

.callout[data-callout="example"] {
    border-left-color: #af52de;
    background-color: rgba(175, 82, 222, 0.05);
}

/* 折叠面板 (Details) 的平滑处理 */
details.callout > summary {
    list-style: none;
    cursor: pointer;
    outline: none;
}

    details.callout > summary::-webkit-details-marker {
        display: none;
    }

details.callout[open] .callout-content {
    animation: fade-in 0.3s ease-out;
}

@keyframes fade-in {
    from {
        opacity: 0;
        transform: translateY(-4px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

